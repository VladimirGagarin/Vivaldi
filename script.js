document.addEventListener("DOMContentLoaded",(function(){const e=[];let n=[],t=0,o={icon:null,span:null,audio:null,music:null};const a=JSON.parse(localStorage.getItem("LikedSongs")||"[]"),i=(JSON.parse(localStorage.getItem("ListenedSongs")||"[]"),JSON.parse(localStorage.getItem("UserPlaylist")||"[]"));document.documentElement.scrollTop=0;const s=document.querySelector(".video-layout"),l=s.querySelector("video"),r=s.querySelectorAll(".song-controls .video-actions button")[0],c=s.querySelectorAll(".song-controls .video-actions button")[1],d=s.querySelector(".song-controls .video-progress-truck .video-progress-bar"),u=s.querySelector(".song-controls .video-actions span");let m=!1,g=!1;document.addEventListener("contextmenu",(function(e){e.preventDefault()})),document.addEventListener("keydown",(function(e){("F12"===e.key||e.ctrlKey&&e.shiftKey&&"I"===e.key||e.ctrlKey&&e.shiftKey&&"C"===e.key||e.ctrlKey&&e.shiftKey&&"J"===e.key)&&(e.preventDefault(),T("Not now for the moment."))}));const p=[{mood:"Upbeat",description:"Energetic and lively songs, often with a fast tempo and positive energy.",reader:"cantabile/reader1.mp3",img:"images/emoji2.jpg"},{mood:"Happy",description:"Cheerful and light-hearted songs, designed to boost your spirits.",reader:"cantabile/reader2.mp3",img:"images/emoji1.jpg"},{mood:"Sad",description:"Songs that evoke sadness or melancholy feelings.",reader:"cantabile/reader3.mp3",img:"images/emoji3.jpg"},{mood:"Romantic",description:"Songs that convey love, affection, and romantic emotions.",reader:"cantabile/reader4.mp3",img:"images/emoji4.jpg"},{mood:"Motivational",description:"Songs that inspire and encourage action, often used for workouts or personal growth.",reader:"cantabile/reader5.mp3",img:"images/emoji5.jpg"},{mood:"Relaxing",description:"Calm, soothing songs that help with relaxation or stress relief.",reader:"cantabile/reader6.mp3",img:"images/emoji6.jpg"},{mood:"Angry",description:"Songs that express frustration, rage, or strong emotions.",reader:"cantabile/reader7.mp3",img:"images/emoji7.jpg"},{mood:"Mellow",description:"Smooth and gentle songs that create a laid-back atmosphere.",reader:"cantabile/reader8.mp3",img:"images/emoji8.jpg"},{mood:"Dreamy",description:"Songs with a soft, ethereal, or otherworldly vibe.",reader:"cantabile/reader9.mp3",img:"images/emoji9.jpg"},{mood:"Nostalgic",description:"Songs that evoke memories of the past, often bittersweet.",reader:"cantabile/reader10.mp3",img:"images/emoji10.jpg"},{mood:"Epic",description:"Grand, powerful songs often used in movie soundtracks or anthems.",reader:"cantabile/reader11.mp3",img:"images/emoji11.jpg"},{mood:"Chill",description:"Laid-back, easy-going songs, often associated with relaxing moments.",reader:"cantabile/reader12.mp3",img:"images/emoji12.jpg"},{mood:"Party",description:"High-energy songs for social gatherings, clubs, or celebrations.",reader:"cantabile/reader13.mp3",img:"images/emoji13.jpg"},{mood:"Melancholic",description:"Songs that reflect deep sadness or a reflective, sorrowful mood.",reader:"cantabile/reader14.mp3",img:"images/emoji14.jpg"},{mood:"Hopeful",description:"Songs that convey optimism, anticipation, or positive aspirations.",reader:"cantabile/reader15.mp3",img:"images/emoji15.jpg"},{mood:"Sentimental",description:"Songs that evoke deep emotions and affection, often tied to memories.",reader:"cantabile/reader16.mp3",img:"images/emoji16.jpg"},{mood:"Peaceful",description:"Calm and serene songs, perfect for unwinding and inner peace.",reader:"cantabile/reader17.mp3",img:"images/emoji17.jpg"},{mood:"Intense",description:"Songs that are dramatic and full of energy, creating a sense of urgency.",reader:"cantabile/reader18.mp3",img:"images/emoji18.jpg"},{mood:"Fun",description:"Light-hearted and playful songs, often associated with good times and laughter.",reader:"cantabile/reader19.mp3",img:"images/emoji19.jpg"},{mood:"Euphoric",description:"Songs that evoke intense joy or bliss, often with a dance or trance feel.",reader:"cantabile/reader20.mp3",img:"images/emoji20.jpg"}],y=[{albumName:"RnB",albumImage:"images/rnb.jpg",description:"Smooth, soulful tunes to set the mood right."},{albumName:"Airwave Music",albumImage:"images/airwave.jpg",description:"Feel the breeze of uplifting beats and serene melodies."},{albumName:"Chills",albumImage:"images/chills.jpg",description:"Relax and unwind with soothing and calming sounds."},{albumName:"Twilight",albumImage:"images/twilight.jpg",description:"Melodies as magical as the twilight hour."},{albumName:"Two Steps From Hell",albumImage:"images/hell.jpg",description:"Epic and inspiring orchestral masterpieces."},{albumName:"Classical",albumImage:"images/waltz.jpg",description:"Graceful rhythms for dreamy dances under the stars."},{albumName:"Disney",albumImage:"images/disney.jpg",description:"Magical tunes that spark joy and nostalgia."},{albumName:"Ncs",albumImage:"images/ncs.jpg",description:"Non-stop energy with no copyright beats."},{albumName:"Celine Dion",albumImage:"images/celine.jpg",description:"Iconic ballads and heartfelt anthems from the queen of vocals."},{albumName:"Bongo",albumImage:"images/bongo.jpg",description:"Vibrant African rhythms to get you moving."},{albumName:"Bollywood",albumImage:"images/bollywood.jpg",description:"Bollywood beats that bring drama and romance to life."},{albumName:"Others",albumImage:"images/others.jpg",description:"A mix of unique sounds for every curious ear."},{albumName:"Cool",albumImage:"images/cool.jpg",description:"Refreshing vibes to keep you chill."}];function f(e){const n=e;for(let e=n.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[n[e],n[t]]=[n[t],n[e]]}return n}function h(e,n,t=(()=>{}),...o){if(!(e&&e instanceof HTMLElement))return;const a=document.createDocumentFragment(),i=document.createElement("li");i.innerHTML=`<span>${n}</span>`,i.onclick=()=>t(...o),a.appendChild(i),e.appendChild(a)}function b(n){const t=document.querySelector(".overlay-album-songs"),o=document.querySelector(".overlay-content-songs ul"),a=document.querySelector(".close-overlay-album");let i;o.innerHTML="",a.onclick=function(){t.style.display="none",clearTimeout(i)};const s=e.filter((e=>e.songGenre===n.albumName));0!==s.length?(t.style.display="flex",t.style.backgroundImage=`url('${n.albumImage}')`,s.forEach((e=>{h(o,e.songName,S,e)})),o.onclick=function(){clearTimeout(i)},i=setTimeout((function(){const e=Math.floor(Math.random()*s.length);S(s[e]),clearTimeout(i)}),1e4*s.length)):T(`No songs in this album ${n.albumName}`)}function v(n){const t=e.filter((e=>e.SongMood.includes(n.mood))),o=Array.from(document.querySelectorAll("main #moods ul li")).find((e=>e.textContent===n.mood));if(0===t.length)return void T(`No songs found for the mood: "${n}".`);const a=t[Math.floor(Math.random()*t.length)];if(!a)return void T("Error: Failed to select a song for the mood.");localStorage.setItem("currentSong",JSON.stringify(a)),localStorage.setItem("songSource","mood"),localStorage.setItem("currentMood",n.mood);const i=new Audio(n.reader);i.play(),document.querySelectorAll("main #moods ul li").forEach((e=>{e!==o&&e.classList.add("hide")})),i.addEventListener("ended",(()=>{setTimeout((function(){window.location.href="songs/"}),5e3)})),i.onerror=function(){window.location.href="songs/"}}function S(e){localStorage.setItem("currentSong",JSON.stringify(e)),localStorage.setItem("songSource","album"),window.location.href="songs"}function w(){const e=document.querySelector("main #archives"),n=e.querySelector("ul"),t=function(){const e={name:"Serenade Collection",songs:f(a).slice(0,10)};return e.songs.length<=3?null:e}(),o=t?[t,...i]:i;Array.isArray(o)&&0!==o.length?(n.innerHTML="",o.forEach((e=>{const t=document.createElement("li");if(t.style.position="relative",t.innerHTML=`\n                ${"Serenade Collection"!==e.name?'<button class="delete-btn">&times;</button>':""}\n                <div class="Playlist-name">${e.name}</div>\n            `,n.appendChild(t),t.onclick=function(){const n=encodeURIComponent(e.name),t=`${window.location.pathname}?playlist=${n}`;window.history.pushState({playlist:e.name},"",t),L(e.songs,e.name)},"Serenade Collection"!==e.name){t.querySelector(".delete-btn").onclick=function(n){n.stopPropagation(),function(e,n){if(!Array.isArray(i))return void T("No playlists found.");const t=i.find((n=>n.name===e.name));if(t){if(!confirm(`Are you sure you want to delete the playlist "${e.name}"?`))return;const o=i.findIndex((e=>e.name===t.name));i.splice(o,1),localStorage.setItem("UserPlaylist",JSON.stringify(i)),n.remove(),T(`Playlist "${e.name}" has been deleted.`),0===i.length&&(document.querySelector("main #archives").style.display="none")}else T("Your Playlist Doesn't Exist")}(e,t)}}"Serenade Collection"===e.name&&(t.setAttribute("title","Your most cherished tunes!"),t.classList.add("highlight"))})),e.style.display="flex"):e.style.display="none"}function L(e,a,i=null){const s=document.querySelector(".create-playlist-arena"),l=document.querySelector("#startPlayListBtn"),r=document.querySelector(".overlay-song-playlist-view"),c=r.querySelector(".song-view-content ul"),d=r.querySelector(".close-overlay-play-view"),u=r.querySelector("h2 span");c.innerHTML="",u.textContent=a+`( ${e.length} )`;const m=f(e);n=[...m];let g=null;e.forEach(((e,n)=>{const o=document.createElement("li");o.innerHTML=`\n            <div class="song-title-view"><span>${n+1}.</span><span>${e.songName}</span></div>\n            <div class="play-icon-timespan">\n                <span><i class="fa fa-eye"></i></span>\n                <span>00 : 00 / 00 : 00 </span>\n                <span>&#9654;</span>\n            </div>`,c.appendChild(o);const a=o.querySelectorAll(".play-icon-timespan span")[2],i=o.querySelectorAll(".play-icon-timespan span")[1],s=o.querySelectorAll(".play-icon-timespan span")[0];let l=!1;o.onclick=function(){const s=new Audio(`../${e.songUrl}`);if(c.querySelectorAll("li").forEach((e=>{e.classList.remove("active")})),o.classList.contains("hidden"))return o.classList.remove("active"),S(),void T("Can't be played because it is not allowed");w(s,a,i,e),t=n,g=o,g.classList.add("active")},s.onclick=function(e){e.stopPropagation(),l=!l,s.innerHTML=l?'<i class="fa fa-eye-slash"></i>':'<i class="fa fa-eye"></i>',o.classList.toggle("hidden",l)}}));const p=i?i.song:n[0],y=Array.from(c.querySelectorAll("li")).find((e=>e.querySelectorAll(".song-title-view span")[1].textContent===p.songName));c.querySelectorAll("li").forEach((e=>{e.classList.remove("active")})),y&&(g=y),g.classList.add("active");const h=g.querySelectorAll(".play-icon-timespan span")[2],b=g.querySelectorAll(".play-icon-timespan span")[1],v=new Audio(`../${p.songUrl}`);function S(){g.classList.add("active"),c.querySelectorAll("li").forEach((e=>{e.querySelectorAll(".play-icon-timespan span")[0].style.opacity=1,e.querySelectorAll(".play-icon-timespan span")[0].style.pointerEvents="auto",e.querySelectorAll(".play-icon-timespan span")[0].style.color="#f4f4f4"})),g.querySelectorAll(".play-icon-timespan span")[0].style.opacity=.2,g.querySelectorAll(".play-icon-timespan span")[0].style.pointerEvents="none",g.querySelectorAll(".play-icon-timespan span")[0].style.color="red"}function w(i,s,l,r){if(o.audio&&o.audio.src!==i.src)o.audio.pause(),o.audio.currentTime=0,o.icon.innerHTML="&#9654;",o.span.textContent="00 : 00 / 00 : 00";else if(o.audio&&o.audio.src===i.src&&!o.audio.paused)return o.audio.pause(),void(s.innerHTML="&#9654;");o={audio:i,icon:s,span:l,music:r},o.audio.play().then((()=>{s.innerHTML="&#10074;&#10074;",u.textContent=a+`( ${t+1} / ${e.length} )`,T(`Playing...${r.songName}`,"../logo.jpg"),S()})).catch((e=>{"NotAllowedError"===e.name&&(document.getElementById("playback-overlay").style.display="flex",document.getElementById("playback-btn").addEventListener("click",(()=>{document.getElementById("playback-overlay").style.display="none",o.audio.play().catch((e=>console.error("Still failed:",e)))}),{once:!0})),s.innerHTML="&#9654;"}));const d=Array.from(c.querySelectorAll("li")).find((e=>e.querySelector(".song-title-view span").textContent===r.songName));function m(e){const n=Math.floor(e/60),t=Math.floor(e%60);return`${n<10?`0${n}`:n} : ${t<10?`0${t}`:t}`}d&&(c.querySelectorAll("li").forEach((e=>e.classList.remove("active"))),d.classList.add("active")),o.audio.addEventListener("timeupdate",(()=>{const e=isNaN(o.audio.duration)?"00 : 00":m(o.audio.duration);l.textContent=`${m(o.audio.currentTime)} / ${e}`,E(a,n,t,o.audio.currentTime,!0)})),o.audio.addEventListener("ended",(()=>{s.innerHTML="&#9654;",l.textContent="00 : 00 / 00 : 00",s.parentElement.parentElement.classList.remove("active");const e=(e=>{let t=e;do{t=(t+1)%n.length;const e=c.querySelectorAll("li")[t];if(!e.classList.contains("hidden"))return{song:n[t],index:t,li:e}}while(t!==e);return null})(t);if(e){t=e.index;const n=e.song,o=e.li,a=o.querySelectorAll(".play-icon-timespan span")[2],i=o.querySelectorAll(".play-icon-timespan span")[1],s=new Audio(`../${n.songUrl}`);g=o,w(s,a,i,n),o.classList.add("active")}else T("No more playable songs in the playlist.")})),o.audio.addEventListener("error",(()=>{o.icon.style.display="none",c.style.pointerEvents="none",document.querySelector(".loading-content").style.display="flex",E(a,n,0,0,!1)})),o.audio.addEventListener("waiting",(()=>{o.icon.style.display="none",c.style.pointerEvents="none",document.querySelector(".loading-content").style.display="flex"})),o.audio.addEventListener("pause",(()=>{E(a,n,0,0,!1)})),o.audio.addEventListener("stalled",(()=>{o.icon.style.display="none",c.style.pointerEvents="none",document.querySelector(".loading-content").style.display="flex",E(a,n,t,o.audio.currentTime,!0)})),o.audio.addEventListener("loadedmetadata",(()=>{o.icon.style.display="block",o.icon.innerHTML="&#10074;&#10074;",c.style.pointerEvents="auto",document.querySelector(".loading-content").style.display="none"})),o.audio.addEventListener("playing",(()=>{o.icon.style.display="block",o.icon.innerHTML="&#10074;&#10074;",c.style.pointerEvents="auto",document.querySelector(".loading-content").style.display="none"}))}v.currentTime=i?i.time:0,t=n.findIndex((e=>e.songName===p.songName)),w(v,h,b,p),r.style.display="flex",s.style.display="none",l.disabled=!1,d.onclick=function(){t=0,n=[],r.style.display="none",o&&o.audio&&o.icon&&o.span&&(o.audio.pause(),o.icon.innerHTML="&#9654;",o.span.textContent="00 : 00 / 00 : 00",o.currentTime=0),o={icon:null,span:null,audio:null},E(a,n,0,0,!1)}}function E(e,n,t,o,a){localStorage.setItem("currentPlaylist",JSON.stringify({name:e,songs:n,currentIndex:t,currentTime:o,isPlaying:a}))}function C(){const e=function(){const e=JSON.parse(localStorage.getItem("currentPlaylist"));return e&&e.isPlaying?e:null}();if(e){const n=document.createElement("div");n.className="resume-overlay",n.innerHTML=`\n                <div class="resume-content">\n                    <p>Would you like to resume the song ${e.songs[e.currentIndex].songName} in  playlist "${e.name}"?</p>\n                    <button id="resumePlaylistBtn">Yes</button>\n                    <button id="cancelResumeBtn">No</button>\n                </div>`,document.body.appendChild(n),document.getElementById("resumePlaylistBtn").onclick=()=>{document.body.removeChild(n);const t={song:e.songs[e.currentIndex],time:e.currentTime,number:e.currentIndex};L(e.songs,e.name,t),localStorage.removeItem("currentPlaylist")},document.getElementById("cancelResumeBtn").onclick=()=>{document.body.removeChild(n),localStorage.removeItem("currentPlaylist")}}}function T(e,n="./logo.jpg"){const t=document.querySelector(".notification-section"),o=t.querySelector(".img img"),a=t.querySelector(".message-section span");if(o.src="",a.textContent="",a.textContent=e,o.src=n,"granted"===Notification.permission)if("visible"!==document.visibilityState){new Notification("Vivaldi Cantabile",{body:e,icon:"../logo.jpg",image:n}).onclick=()=>window.focus()}else t.style.display="flex",setTimeout((()=>{t.style.display="none"}),5e3);else Notification.requestPermission().then((o=>{"granted"===o?T(e,n):(t.style.display="flex",setTimeout((()=>{t.style.display="none"}),5e3))}));t.onclick=function(){t.style.display="none"}}fetch("songs.json").then((e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()})).then((n=>{e.push(...n),fetch("songs.json").then((e=>e.json())).then((e=>{e.forEach((n=>{const t=[],o=[];e.forEach((e=>{t.includes(e.songGenre)||t.push(e.songGenre),o.includes(e.songArtist1)||o.push(e.songArtist1),e.songArtist2&&!o.includes(e.songArtist2)&&o.push(e.songArtist2)}));const a=`songs/index.html?song=${encodeURIComponent(n.songName)}`,i={"@context":"http://schema.org","@type":"Song",name:n.songName,genre:n.songGenre,keywords:n.songKeyWord,mood:n.SongMood,artist:n.songArtist1,url:a},s=document.createElement("script");s.type="application/ld+json",s.textContent=JSON.stringify(i),document.head.appendChild(s)}))})).catch((e=>console.error("Error fetching song data:",e))),function(){const n=document.querySelector("main #moods ul"),t=document.querySelector("main #featured-songs ul"),o=document.querySelector("main #featured-artist ul");f(p).forEach((e=>{h(n,`${e.mood}`,v,e)}));const a=f(e);(a.length>20?a.slice(0,20):a).forEach((e=>{h(t,e.songName,S,e)})),f(y).forEach((n=>{const t=e.filter((e=>e.songGenre===n.albumName));h(o,`${n.albumName}  (+${t.length})`,b,n)})),n.querySelectorAll("li").forEach((e=>{const n=p.find((n=>e.textContent.includes(n.mood)));n&&(e.style.backgroundImage=`url('${n.img}')`)})),o.querySelectorAll("li").forEach((e=>{const n=y.find((n=>e.textContent.includes(n.albumName)));n&&(e.style.backgroundImage=`url('${n.albumImage}')`)}))}(),function(){const n=[{song:"Charm - Vivian ft. Jose Chameleone",album:"Bongo"},{song:"Loved By You",album:"Airwave Music"},{song:"Blue Danube Waltz",album:"Classical"},{song:"JLS - Love You More",album:"RnB"},{song:"The Greatest Showman Cast - Tightrope",album:"Twilight"},{song:"Sing Me to Sleep",album:"Chills"},{song:"Groban - You'll Raise me Up",album:"Others"},{song:"Dil Mera Blast",album:"Bollywood"},{song:"Slow",album:"Ncs"},{song:"CÃ©line Dion - I Drove All Night",album:"Celine Dion"},{song:"Hans Zimmer - Reunion (Love Found Us)",album:"Cool"},{song:"Breathe",album:"Two Steps From Hell"},{song:"Can I Have This Dance",album:"Disney"}].map((n=>e.find((e=>e.songName===n.song&&e.songGenre===n.album)))).filter(Boolean);!function(e){const n=document.querySelector(".fav-list"),t=n.querySelector(".fav-list ul");e.forEach((e=>{const n=document.createElement("li"),o=y.find((n=>n.albumName===e.songGenre));n.innerHTML=` \n            <div class="image">\n                <img src="${o?o.albumImage:"./logo.jpg"}" alt="favourite_song_image">\n            </div>\n            <div class="song-name">\n                <h3>${e.songKeyWord}</h3>\n            </div>`,t.appendChild(n),n.onclick=function(){S(e)}})),n.style.display="block"}(f(n))}()})).catch((e=>{console.error("Error fetching songs:",e),console.log("")})),document.querySelector("#startPlayListBtn").onclick=function(){this.disabled=!0,function(){const n=document.querySelector(".create-playlist-arena"),t=document.querySelector("#startPlayListBtn"),o=document.querySelector(".playlist-preview .left-playlist ul"),a=document.querySelector(".playlist-preview .right-playlist ul"),s=n.querySelectorAll(".header-content .action-header-playlist button")[1],l=n.querySelectorAll(".header-content .action-header-playlist button")[0],r=n.querySelector(".playlist-input input");let c=[];function d(n){const t=e.filter((e=>e.songGenre===n));0!==t.length?(a.innerHTML="",t.forEach((e=>{const n=document.createElement("li");n.innerHTML=`\n                <div class="name-of-song"><span>${e.songName}</span></div>\n                <div class="selection">\n                    <input type="checkbox"title='select here'>\n                </div>`,a.appendChild(n);const t=n.querySelector(".selection input");t.checked=c.some((n=>n.songKeyWord===e.songKeyWord)),t.onchange=function(){t.checked?c.push(e):c=c.filter((n=>n.songKeyWord!==e.songKeyWord))}}))):T("no songs available")}a.innerHTML="",n.style.display="block",y.forEach((e=>{h(o,e.albumName,d,e.albumName)})),r.oninput=function(){l.disabled=""===r.value.trim()},l.onclick=function(){if(0===c.length)return T("No songs selected.Please select song(s) to create playlist"),l.disabled=!0,void(r.value="");const e={name:r.value.trim(),songs:[...c]};i.push(e),localStorage.setItem("UserPlaylist",JSON.stringify(i)),l.disabled=!0,r.value="",c=[],a.innerHTML="",o.innerHTML="",n.style.display="none",t.disabled=!1,T(`Playlist "${e.name}" saved successfully!`),i.length>0&&w()},s.onclick=function(){l.disabled=!0,a.innerHTML="",o.innerHTML="",r.value="",t.disabled=!1,c=[],n.style.display="none"}}()},i.length>0&&w(),a.length>3&&w();const q=[{anthem:"cantabile/Anthem B.mp3",img:"images/ussrFlag.gif"},{anthem:"cantabile/Anthem C.mp3",img:"images/eaFlag.gif"}],j={Kenya:"KE",Uganda:"UG",Tanzania:"TZ",Rwanda:"RW",Burundi:"BI","South Sudan":"SS",Ethiopia:"ET",Somalia:"SO",Djibouti:"DJ",Eritrea:"ER"};const x=document.querySelector(".starting-page"),I=x.querySelector("button"),k=x.querySelector("p span");let N,A=6;function M(){const e=new URLSearchParams(window.location.search).get("playlist");e?function(e){if(!Array.isArray(i))return;const n=i.find((n=>n.name.trim().toLowerCase()===e.trim().toLowerCase()));if(!n)return void console.warn(`Playlist "${e}" not found.`);const t=n.songs||[];if(t.length>0){const n=JSON.parse(localStorage.getItem("currentPlaylist")),o=n&&n.isPlaying?{song:n.songs[n.currentIndex],time:n.currentTime,number:n.currentIndex}:null;L(t,e,o)}}(e):C()}sessionStorage.getItem("introShown")?(document.querySelector(".starting-page").style.display="none",M()):async function(){try{const e=await fetch("https://api.country.is",{timeout:5e3});if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const n=(await e.json()).country;return Object.values(j).includes(n)}catch(e){return console.error("Error fetching user country:",e),!1}}().then((e=>{const n=new Audio(q[e?1:0].anthem);function t(){n.pause(),n.currentTime=0,x.style.display="none",clearInterval(N),M(),sessionStorage.setItem("introShown","true")}function o(e){const n=Math.floor(e/60),t=Math.floor(e%60);return`${n<10?`0${n}`:n} : ${t<10?`0${t}`:t}`}n.preload="auto",x.style.backgroundImage=`url('${q[e?1:0].img}')`,n.addEventListener("loadedmetadata",(()=>{let e,a;N=setInterval((function(){A--,k.textContent=`In ${A}`,A<=0&&(k.textContent="",clearInterval(N),I.disabled=!1,I.textContent="Lets Start",I.addEventListener("click",(()=>{n.play().catch((e=>{console.error("Playback failed:",e)})),I.disabled=!0,k.textContent=o(n.duration)})))}),1e3),n.ontimeupdate=function(){const o=Math.floor(1*n.duration/4);a||e||(e=o,I.textContent=`Checking...(${e})`,a=setInterval((()=>{e--,e>0?I.textContent=`Checking...(${e})`:(clearInterval(a),a=null)}),1e3)),n.currentTime>=o&&(I.disabled=!1,I.textContent="View Page",clearInterval(a),a=null,I.onclick=function(){t()})}})),n.addEventListener("timeupdate",(function(){const e=n.duration-n.currentTime;k.textContent=o(e)})),n.onerror=()=>{t()},n.onended=function(){t()}})),l.onclick=function(){m=!m,r.innerHTML=m?"&#10074;&#10074;":"&#9654;",m?l.play():l.pause()},r.onclick=function(){m=!m,r.innerHTML=m?"&#10074;&#10074;":"&#9654;",m?l.play():l.pause()},l.onended=function(){m=!1,r.innerHTML=m?"&#10074;&#10074;":"&#9654;",d.style.backgroundColor="red",u.textContent="Ended",setTimeout((()=>{u.textContent="",d.style.width="0",d.style.backgroundColor="#007BFF"}),3e3)},l.onerror=function(){u.textContent="Error playing Video",d.style.width="100%",d.style.backgroundColor="red",setTimeout((()=>{u.textContent="Try reload your device"}),3e3)},l.addEventListener("play",(function(){u.textContent="Playing...",setTimeout((()=>{u.textContent=""}),3e3)})),l.addEventListener("playing",(function(){setTimeout((()=>{u.textContent=g?"Video is muted":""}),3e3),l.classList.remove("blur")})),l.addEventListener("pause",(function(){u.textContent="Paused...",setTimeout((()=>{u.textContent=g?"Video is muted":""}),3e3)})),l.addEventListener("stalled",(function(){u.textContent="Just a moment...",setTimeout((()=>{u.textContent="Exspectatio musica..."}),3e3),l.classList.add("blur")})),l.addEventListener("waiting",(function(){u.textContent="Just a moment...",setTimeout((()=>{u.textContent="Interludio temporis..."}),3e3)})),l.addEventListener("timeupdate",(function(){const e=l.currentTime/l.duration*100;d.style.width=`${e}%`,d.style.background="linear-gradient(to right, orange, pink, cyan)"})),c.onclick=function(){g=!g,c.innerHTML=g?"&#128263;":"&#128264;",l.muted=g,u.textContent=g?"Video is muted":"Enjoy!",g||setTimeout((()=>{u.textContent=""}),3e3)};new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?m||(l.play(),r.innerHTML="&#10074;&#10074;",m=!0,l.muted=!0,g=!0,u.textContent=g?"Video is muted":"Enjoy!",c.innerHTML=g?"&#128263;":"&#128264;"):m&&(l.pause(),r.innerHTML="&#9654;",m=!1)}))}),{threshold:.5}).observe(l)}));
